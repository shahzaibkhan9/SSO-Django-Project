{% extends 'main/generic/base_generic.html' %}
{% load static %}

<title>{% block title %}Dashboard{% endblock %}</title>


{% block content %}
  <div class="row mb-4">
    <div class="col-lg-12 col-md-6 mb-md-0 mb-4">
      <div class="card">
        <div class="card-header pb-0 mb-4">
          {% if not user.is_superuser %}
          <div class="row">
            <div class="col-lg-6 col-7">
              <h6>Assigned Apps</h6>
            </div>
            <div class="row mt-4">
              {% for app in allowed_apps.all %}
              <div class="col-xl-2 col-lg-3 col-md-4 col-sm-6 mb-5">
                <div class="card">
                  <div class="card-header text-center pb-0">
                    <div class="icon icon-lg icon-shape shadow-dark text-center border-radius-xl mt-n4">
                      <!-- <i class="material-icons opacity-10">weekend</i> -->
                      <a href="{{ app.app_url }}" target="_blank"><img src="{{ app.icon.url }}" width="50" height="50" class="mx-auto mt-2 d-block" alt="{{ app.name }} Icon"></a>
                    </div>
                      <!-- <div class="text-end pt-1">
                        <p class="text-sm mb-0 text-capitalize">Today's Money</p>
                      </div> -->
                  </div>
                  <!-- <hr class="dark horizontal my-0"> -->
                  <div class="card-footer p-3 pt-0">
                    <h4 class="mt-4 mb-0 text-center"><a href="{{ app.app_url }}" target="_blank">{{ app.name }}</a></h4>
                    <!-- <p class="mb-0"><span class="text-success text-sm font-weight-bolder"></span>Description</p> -->
                  </div>
                </div>
              </div>
              {% endfor %}
            </div>
          </div>
          {% endif %}

          {% if user.is_superuser %}
          <div class="row">
            <div class="col-lg-6 col-7">
              <h6>Statistics</h6>
            </div>
            <div class="row mt-4">
              <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
                <div class="card">
                  <div class="card-header text-center pb-0">
                    <div class="icon icon-lg icon-shape shadow-dark text-center border-radius-xl mt-n4">
                      <i class="material-icons opacity-10 mx-auto d-block" style="color: #000000; font-size: 2em;">auto_awesome_motion</i>
                    </div>
                  </div>
                  <div class="card-footer p-3 pt-0">
                    {% if app_count > 1 %}
                    <h4 class="mt-4 mb-0 text-center">Registered Apps: {{ app_count }}</h4>
                    {% else %}
                    <h4 class="mt-4 mb-0 text-center">Registered App: {{ app_count }}</h4>
                    {% endif %}
                  </div>
                </div>
              </div>

              <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
                <div class="card">
                  <div class="card-header text-center pb-0">
                    <div class="icon icon-lg icon-shape shadow-dark text-center border-radius-xl mt-n4">
                      <i class="material-icons opacity-10 mx-auto d-block" style="color: #000000; font-size: 2em;">groups</i>
                    </div>
                  </div>
                  <div class="card-footer p-3 pt-0">
                    {% if users > 1 %}
                    <h4 class="mt-4 mb-0 text-center">Registered Users: {{ users }}</h4>
                    {% else %}
                    <h4 class="mt-4 mb-0 text-center">Registered User: {{ users }}</h4>
                    {% endif %}
                  </div>
                </div>
              </div>

              <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
                <div class="card">
                  <div class="card-header text-center pb-0">
                    <div class="icon icon-lg icon-shape shadow-dark text-center border-radius-xl mt-n4">
                      <i class="material-icons opacity-10 mx-auto d-block" style="color: #000000; font-size: 2em;">how_to_reg</i>
                      <!-- <i class="material-symbols-outlined opacity-10 mx-auto d-block" style="color: #000000; font-size: 2em;">
                        person_check
                      </i>
                    </div>-->
                  </div>
                  <div class="card-footer p-3 pt-0">
                    {% if active_users > 1 %}
                    <h4 class="mt-4 mb-0 text-center">Active Users: {{ active_users }}</h4>
                    {% else %}
                    <h4 class="mt-4 mb-0 text-center">Active User: {{ active_users }}</h4>
                    {% endif %}
                  </div>
                </div>
              </div>
            </div>
          </div>
          {% endif %}
        </div>
      </div>
    </div>
    </div>
    {% endblock %}